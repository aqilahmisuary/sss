<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>reveal.js</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/colouredball.css">
    <link rel="stylesheet" href="css/theme/night.css">
    <link href="css/hover.css" rel="stylesheet" media="all">
    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!-- Printing and PDF exports -->
    <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section id="slide-1">
                <!-- Slide 1 -->
                <h3>Synthesising Sounds using Web Audio API</h3>
                <h4>Introducing basic sound synthesis using Web Audio</h4>
                <canvas id="canvas" width="845" height="523"></canvas>
                <br>
                <input type="range" id="volumeSlider" min="0" max="1" value="0"> Volume <span id="volumeRange"></span>
                <br>
                <br>
                <button type="button" id="sine">Sine</button>
                <button type="button" id="tri">Triangle</button>
                <button type="button" id="sq">Square</button>
                <button type="button" id="saw">Sawtooth</button>
            </section>
            <!-- Slide 1 -->
            <section id="slide-2">
                <!-- Slide 2 -->
                <p class="fragment fade-in" data-fragment-index="1">
                    <h2>What is the Web Audio API?</h2></p>
            </section>
            <!-- Slide 2 -->
            <section id="slide-3">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3 id="grain" class="hvr-bounce-in">A way to work with audio on the web</h3></p>
            </section>
            <section id="slide-4">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Audio Context</h3></p>
                <p class="fragment fade-in">
                    <button type="button" id="osc">Oscillator</button> <span class="fragment fade-in">&#10141;</span> <span class="fragment fade-in"><button type="button" id="compressor">Compressor</button></span> <span class="fragment fade-in">&#10141;</span> <span class="fragment fade-in"><button type="button" id="analyser">Analyser</button></span> <span class="fragment fade-in">&#10141;</span> <span class="fragment fade-in"><button type="button" id="contextDest">Context Destination</button></span></p>
                <br>
                <canvas id="canvasHov" class="fragment fade-in" width="845" height="423"></canvas>
                <br>
                <div class="fragment fade-in">
                    <input type="range" id="compressorSlider" min="-100" max="100" value="0"> Compressor Threshold <span id="thresRange"></span></div>
            </section>
            <section id="slide-5">
                <p>So what is happening and how do we make it cool?</p>
            </section>
            <section id="slide-6">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Introducing Sound Synthesis</h3></p>
                <p class="fragment fade-in" data-fragment-index="2">Sound synthesis is the technique of generating sound, using electronic hardware or software, from scratch.</p>
                <p class="fragment fade-in" data-fragment-index="3">Commonly used to <span id="gen" class="fragment fade-in" data-fragment-index="4">generate interesting and unique sounds or timbres incapable of being produced acoustically,</span> <span id="rec" class="fragment fade-in" data-fragment-index="5"><b> recreate or model the sounds of real-world acoustic instruments or sounds,</b></span> <span id="fac" class="fragment fade-in" data-fragment-index="6"> or facilitate the automation of systems and processes (text-to-speech software, train station P.A.s)</span></p>
                <p class="fragment fade-in" data-fragment-index="7">From <a href="https://en.wikibooks.org/wiki/Sound_Synthesis_Theory/Introduction">WikiBooks: Sound Synthesis Theory/Introduction </a></p>
            </section>
            <section id="slide-7">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Types of Sound Synthesis</h3></p>
                <p class="fragment fade-in" data-fragment-index="2">Subtractive Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="3">Additive Synthesis (and Resynthesis)</p>
                <p class="fragment fade-in" data-fragment-index="4">Component (Physical) Modeling Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="5">Wavetable Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="6">Vector Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="7">LA (Linear Arithmetic) Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="8">Phase Distortion Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="9">FM (Frequency Modulation) Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="10">Sample-Based (PCM) (S&S) Synthesis</p>
                <p class="fragment fade-in" data-fragment-index="11">Granular Synthesis</p>
            </section>
            <section id="slide-8">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Subtractive Synthesis</h3></p>
                <p>
                    <blockquote class="fragment fade-in" data-fragment-index="2">Subtractive Synthesis is a very simple signal chain of an oscillator (sound source) running through a filter (EQ curve) which is then sent to an amplifier for gain staging and ADSR control.</blockquote><span class="fragment fade-in" data-fragment-index="3"><a href="https://theproaudiofiles.com/sound-synthesis-basics/">From ProAudioFiles.com</a></span></p>
            </section>
            <section id="slide-9">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Seeking guidance from shifu Chris Lowis</h3></p>
                <p><span class="fragment fade-in" data-fragment-index="3"><a href="https://dev.opera.com/articles/drum-sounds-webaudio/">Synthesising Drum Sounds with the Web Audio API</a></span></p>
            </section>
            <section id="slide-10">
                <p class="fragment fade-in" data-fragment-index="1">
                    <h3>Synthesising the kick drum</h3></p>
                <p class="fragment fade-in" data-fragment-index="2"><img data-src="./images/kickGraph.jpg"></p>
            </section>
            <section id="slide-11">
                <p class="fragment fade-in" data-fragment-index="1">Create audio context</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
                window.AudioContext = window.AudioContext || window.webkitAudioContext;
var audioContext = new AudioContext();
                </code></pre></p>
                <p class="fragment fade-in" data-fragment-index="3">Create our Oscillator nodes and Gain nodes using the <code>createOscillator()</code> and <code>createGain()</code> methods</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="4" data-trim data-noescape>
var osc = audioContext.createOscillator();
var osc2 = audioContext.createOscillator();
var gainOsc = audioContext.createGain();
var gainOsc2 = audioContext.createGain();
                </code></pre></p>
                <p class="fragment fade-in" data-fragment-index="5">Define the type of oscillators we’re going to use</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="6" data-trim data-noescape>
osc.type = "triangle";
osc2.type = "sine";

osc.frequency.value = 40;
osc2.frequency.value = 80;
                </code></pre></p>               
            </section>
             <section id="slide-12">
                <p class="fragment fade-in" data-fragment-index="1">Automate the amplitude and frequency</p>
                <p class="fragment fade-in" data-fragment-index="2"><img data-src="./images/kickwave.png"></p>
                <p class="fragment fade-in" data-fragment-index="3">The sound of a kick drum starts off with high attack and falls away rapidly. So to emulate this, we can use the methods <code>setValueAtTime()</code> or <code>linearRampToValueAtTime()</code> and <code>exponentialRampToValueAtTime()</code></p>
            </section>
            <section id="slide-13">
            <p class="fragment fade-in" data-fragment-index="1">Automating our oscillator and gain nodes.</p>
            <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
gainOsc.gain.setValueAtTime(1, audioContext.currentTime);
gainOsc.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);

gainOsc2.gain.setValueAtTime(1, audioContext.currentTime);
gainOsc2.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);  
                </code></pre></p> 
                <p class="fragment fade-in" data-fragment-index="3">Do the same for the frequency values as well</p>
            <p> <pre><code class="fragment fade-in" data-fragment-index="4" data-trim data-noescape>
osc.frequency.setValueAtTime(120, audioContext.currentTime);
osc.frequency.exponentialRampToValueAtTime(1, audioContext.currentTime + 0.5);

osc2.frequency.setValueAtTime(50, audioContext.currentTime);
osc2.frequency.exponentialRampToValueAtTime(1, audioContext.currentTime + 0.5);
                </code></pre></p> 
                <p class="fragment fade-in" data-fragment-index="5">Connect everything together</p>
                            <p> <pre><code class="fragment fade-in" data-fragment-index="6" data-trim data-noescape>
osc.connect(gainOsc);
osc2.connect(gainOsc2);
gainOsc.connect(audioContext.destination);
gainOsc2.connect(audioContext.destination);
                </code></pre></p> 
                </section>   
                <section id="slide-14">
                <p class="fragment fade-in" data-fragment-index="1">Our final steps would be to start and stop our oscillators</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
osc.start(audioContext.currentTime);
osc2.start(audioContext.currentTime);

osc.stop(audioContext.currentTime + 0.5);
osc2.stop(audioContext.currentTime + 0.5);
                </code></pre></p> 
            </section> 
            <section id="slide-15">
                <p class="fragment fade-in" data-fragment-index="1">We are only able to start and stop the oscillators once, so what I did was to put everything in a function</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
function kick() {

    var osc = audioContext.createOscillator();
    var osc2 = audioContext.createOscillator();
    var gainOsc = audioContext.createGain();
    var gainOsc2 = audioContext.createGain();

    osc.type = "triangle";
    osc2.type = "sine";

    gainOsc.gain.setValueAtTime(1, audioContext.currentTime);
    gainOsc.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);

    gainOsc2.gain.setValueAtTime(1, audioContext.currentTime);
    gainOsc2.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
   
    osc.frequency.setValueAtTime(120, audioContext.currentTime);
    osc.frequency.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);

    osc2.frequency.setValueAtTime(50, audioContext.currentTime);
    osc2.frequency.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);

    osc.connect(gainOsc);
    osc2.connect(gainOsc2);
    gainOsc.connect(audioContext.destination);
    gainOsc2.connect(audioContext.destination);

    osc.start(audioContext.currentTime);
    osc2.start(audioContext.currentTime);

    osc.stop(audioContext.currentTime + 0.5);
    osc2.stop(audioContext.currentTime + 0.5);

};
                </code></pre></p> 
            </section> 
            <section id="slide-16">
                <p class="fragment fade-in" data-fragment-index="1">Hear what <code>kick()</code> sounds like!</p>
                <br><div class="btnz fragment fade-in" data-fragment-index="2">
                <button type="button" id="mixButton" class="btns">Play Kick</button>
                <!-- <button type="button" id="stopButton" class="btns">Stop</button></div>
                <br><p><div id="container2" class="bigbox"></div></p> -->
            </section> 
<!--             <section id="slide-17">
                <p class="fragment fade-in" data-fragment-index="1">What is going on?</p>
              
            </section> 
            <section id="slide-18">
                <p class="fragment fade-in" data-fragment-index="1"> <h3>Seek guidance again from shifu <br> Chris Lowis</h3></p>
                <p><span class="fragment fade-in" data-fragment-index="2"><a href="http://www.html5rocks.com/en/tutorials/audio/scheduling/">A Tale of Two Clocks - Scheduling Web Audio with Precision</a></span></p>
                <p><span class="fragment fade-in" data-fragment-index="3"><a href="http://sonoport.github.io/web-audio-clock.html">Understanding The Web Audio Clock</a></span></p>
            </section> -->
            <section id="slide-19">
                <p class="fragment fade-in" data-fragment-index="1"> <h3>Synthesising the snare drum</h3></p>
                <p class="fragment fade-in" data-fragment-index= "2"> When you hit a snare drum, there’s a series of wire springs underneath it that rattles. That rattling can be synthesised using a burst of noise.</p>
            </section>
            <section id="slide-20">
                <p class="fragment fade-in" data-fragment-index="1"> <h3>So how do we make noise using <br>web audio?</h3></p>
                <p class="fragment fade-in" data-fragment-index= "2"> We use a random number generator!</p>
                <p class="fragment fade-in" data-fragment-index= "3"> Click<a href="http://noisehack.com/generate-noise-web-audio-api/"> here </a> for an awesome article on generating different kinds of noise using web audio</p>                
            </section>
            <section id="slide-21">
                <p class="fragment fade-in" data-fragment-index="1"> Noise Generator </p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
function noise() {

    var node = audioContext.createBufferSource(),
        buffer = audioContext.createBuffer(1, 4096, audioContext.sampleRate),
        data = buffer.getChannelData(0);

    for (var i = 0; i < 4096; i++) {

        data[i] = Math.random();
    }

    node.buffer = buffer;
    node.loop = true;
    node.start(audioContext.currentTime);
    node.stop(audioContext.currentTime + 0.2);
    node.connect(audioContext.destination);
};
                </code></pre></p>
               <br> <button type="button" id="noiseButton" class="fragment fade-in hvr-buzz" data-fragment-index="3">Click for Noise</button>            
            </section>
            <section id="slide-22">
            <p class="fragment fade-in" data-fragment-index="1">Graph of our snare drum connections</p>
                <p class="fragment fade-in" data-fragment-index="2"><img data-src="./images/snareGraph.jpg"></p>
                <p class="fragment fade-in" data-fragment-index="3">Added a filter in the signal flow, this is because we would want to remove any low frequencies generated by the noise to create a more realistic snare sound.</p>
            </section>
            <section id="slide-23">
            <p class="fragment fade-in" data-fragment-index="1">Create filter node</p>
            <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
var filter = audioContext.createBiquadFilter();
    filter.type = "highpass";

    filter.frequency.setValueAtTime(100, audioContext.currentTime);
    filter.frequency.linearRampToValueAtTime(1000, audioContext.currentTime + 0.2);
                </code></pre></p>
                <p class="fragment fade-in" data-fragment-index="3">Add an oscillator and gain node to create that <br>sharp percussive sound</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="4" data-trim data-noescape>
var osc3 = audioContext.createOscillator();
var gainOsc3 = audioContext.createGain();

osc3.type = "triangle";
osc3.frequency.value = 100;

gainOsc3.gain.setValueAtTime(0, audioContext.currentTime);
gainOsc3.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                </code></pre></p>
                
            </section>
            <section id="slide-24">
                <p class="fragment fade-in" data-fragment-index="1">Hear what <code> snare() </code> sounds like!</p>
                <br><button type="button" id="snareButton" class="fragment fade-in btns hvr-bounce-out" data-fragment-index="2">Snare</button>
            </section> 
             <section id="slide-25">
                <p class="fragment fade-in" data-fragment-index="1"><h3>Synthesising the hi-hats</h3></p>
                <p class="fragment fade-in" data-fragment-index="2"><img data-src="./images/hihatDiagram.png"></p>
                <p><span class="fragment fade-in" data-fragment-index="3">Reference: Joe Sullivan’s<a href="http://joesul.li/van/synthesizing-hi-hats/"> Synthesizing Hi-Hats with Web Audio</a></span></p>
            </section> 
            <section id="slide-26">
                <p class="fragment fade-in" data-fragment-index="1">Hi-hat graph</p>
                <p class="fragment fade-in" data-fragment-index="2"><img data-src="./images/hihatGraph.jpg"></p>
            </section> 
            <section id="slide-27">
                <p class="fragment fade-in" data-fragment-index="1">The sound of 6 oscillators</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
var fundamental = 40;
var ratios = [2, 3, 4.16, 5.43, 6.79, 8.21];

ratios.forEach(function(ratio) {

        var osc4 = audioContext.createOscillator();
        osc4.type = "square";
        osc4.frequency.value = fundamental * ratio;
        osc4.connect(audioContext.destination);

        osc4.start(audioContext.currentTime);
        osc4.stop(audioContext.currentTime + 0.05);
        
    });
                </code></pre></p>
                <br><button type="button" id="sixOscButton" class="fragment fade-in btns hvr-bounce-out" data-fragment-index="3">Jeng</button>
            </section> 
            <section id="slide-28">
                <p class="fragment fade-in" data-fragment-index="1">The sound of 6 square waves is quite massive. So our next step would be to run it through a bandpass filter</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="2" data-trim data-noescape>
var bandpass = audioContext.createBiquadFilter();

bandpass.type = "bandpass";
bandpass.frequency.value = 10000;
                </code></pre></p>
                <p class="fragment fade-in" data-fragment-index="3">Refine it so it sounds more percussive by using our gain node <br> to set the envelope</p>
                <p> <pre><code class="fragment fade-in" data-fragment-index="4" data-trim data-noescape>
gainOsc4.gain.setValueAtTime(1, audioContext.currentTime);
gainOsc4.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                </code></pre></p>
                <p class="fragment fade-in" data-fragment-index="5">Add a highpass filter to clear away the low frequencies</p>
                 <p> <pre><code class="fragment fade-in" data-fragment-index="6" data-trim data-noescape>
var highpass = audioContext.createBiquadFilter();
highpass.type = "highpass";
highpass.frequency.value = 7000;
                </code></pre></p>
            </section> 
            <section id="slide-29">
                <p class="fragment fade-in" data-fragment-index="1">Hear the sound of hi-hats!</p>
                <button type="button" id="hihatButton" class="btns fragment fade-in" data-fragment-index="2">Play Hi-Hat</button>
               
            </section> 
            <section id="slide-30">
                <p class="fragment fade-in" data-fragment-index="1">Finally let's hear the sound of everything <a href="http://aqilahmisuary.github.io/sequencer/">combined</a> !</p>
                            
            </section> 
        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="js/colouredballs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [{
            src: 'plugin/markdown/marked.js'
        }, {
            src: 'plugin/markdown/markdown.js'
        }, {
            src: 'plugin/notes/notes.js',
            async: true
        }, {
            src: 'plugin/highlight/highlight.js',
            async: true,
            callback: function() {
                hljs.initHighlightingOnLoad();
            }
        }]
    });
    </script>
</body>

</html>
